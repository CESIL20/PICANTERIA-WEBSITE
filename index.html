<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
  <title>La Picanter√≠a - Gastronom√≠a Peruana Aut√©ntica</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta http-equiv="cache-control" content="max-age=300">
  <meta http-equiv="expires" content="0">

  <link rel="canonical" href="https://picanteriasdelperu.com">
  <meta name="description" content="Descubre La Picanter√≠a: gastronom√≠a peruana aut√©ntica con pescados frescos, tradici√≥n y sabor en cada plato.">
  <meta name="keywords" content="picanter√≠a, comida peruana, ceviche, gastronom√≠a peruana, restaurante en Lima">
  <meta name="author" content="La Picanter√≠a">
  <meta name="rating" content="General">
  <meta name="language" content="es">
  <meta name="copyright" content="La Picanter√≠a">

  <meta property="og:title" content="La Picanter√≠a - Gastronom√≠a Peruana Aut√©ntica">
  <meta property="og:description" content="Tradici√≥n y sabor peruano en cada plato. Ven y vive la experiencia gastron√≥mica √∫nica.">
  <meta property="og:image" content="https://picanteriasdelperu.com/img/pikalogo.png">
  <meta property="og:url" content="https://picanteriasdelperu.com">
  <meta property="og:type" content="website">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="La Picanter√≠a - Gastronom√≠a Peruana Aut√©ntica">
  <meta name="twitter:description" content="Descubre lo mejor de la gastronom√≠a peruana en La Picanter√≠a.">
  <meta name="twitter:image" content="https://picanteriasdelperu.com/img/pikalogo.png">

  <link rel="icon" href="img/pikalogo.png" type="image/png">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/joinchat@4.5.17/build/joinchat.min.css">
  <script src="https://cdn.jsdelivr.net/npm/joinchat@4.5.17/build/joinchat.min.js"></script>

  <style>
    #chrome_websiteIP { display: none !important; }

    :root {
      --primary: #8B7355;
      --secondary: #A0826D;
      --accent: #C9A86A;
      --dark: #1C1917;
      --dark-secondary: #292524;
      --light: #F5F5F4;
      --text-muted: #A8A29E;
      --gradient-elegant: linear-gradient(135deg, #8B7355 0%, #A0826D 100%);
      --gradient-subtle: linear-gradient(135deg, #292524 0%, #1C1917 100%);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background: var(--dark);
      color: var(--light);
      line-height: 1.6;
      overflow-x: hidden;
    }

    /* Language Switcher */
    .lang-es, .lang-en { display: none; }
    body.lang-active-es .lang-es { display: block; }
    body.lang-active-es .lang-es.inline-content { display: inline; }
    body.lang-active-en .lang-en { display: block; }
    body.lang-active-en .lang-en.inline-content { display: inline; }

    /* Header Moderno */
    .modern-header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: rgba(28, 25, 23, 0.95);
      backdrop-filter: blur(20px);
      z-index: 1000;
      transition: all 0.3s ease;
      border-bottom: 1px solid rgba(139, 115, 85, 0.2);
    }

    .modern-header.scrolled {
      background: rgba(28, 25, 23, 0.98);
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
    }

    .header-content {
      max-width: 1400px;
      margin: 0 auto;
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 1rem;
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--primary);
      text-decoration: none;
      transition: transform 0.3s ease;
    }

    .logo:hover {
      transform: translateY(-2px);
    }

    .logo img {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      border: 2px solid var(--primary);
    }

    .nav-menu {
      display: flex;
      gap: 2rem;
      list-style: none;
      align-items: center;
    }

    .nav-menu a {
      color: var(--light);
      text-decoration: none;
      font-weight: 500;
      position: relative;
      transition: color 0.3s ease;
    }

    .nav-menu a::after {
      content: '';
      position: absolute;
      bottom: -5px;
      left: 0;
      width: 0;
      height: 2px;
      background: var(--primary);
      transition: width 0.3s ease;
    }

    .nav-menu a:hover {
      color: var(--primary);
    }

    .nav-menu a:hover::after {
      width: 100%;
    }

    .language-toggle {
      display: flex;
      gap: 0.5rem;
      background: rgba(255, 255, 255, 0.05);
      padding: 0.3rem;
      border-radius: 50px;
    }

    .language-toggle button {
      background: transparent;
      border: none;
      color: var(--light);
      padding: 0.5rem 1rem;
      border-radius: 50px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .hamburger {
      display: none;
      flex-direction: column;
      gap: 5px;
      cursor: pointer;
    }

    .hamburger span {
      width: 25px;
      height: 3px;
      background: var(--primary);
      border-radius: 2px;
      transition: 0.3s;
    }

    /* Hero Section */
    .hero {
      margin-top: 10px;
      min-height: 90vh;
      display: flex;
      align-items: center;
      position: relative;
      overflow: hidden;
    }

    .hero::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: var(--gradient-subtle);
      opacity: 0.3;
      animation: wave 15s ease-in-out infinite;
    }

    @keyframes wave {
      0%, 100% { transform: translateY(0) scale(1); }
      50% { transform: translateY(-20px) scale(1.05); }
    }

    .hero-content {
      max-width: 1400px;
      margin: 0 auto;
      padding: 2rem;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 4rem;
      align-items: center;
    }

    .hero-text h1 {
      font-size: clamp(2.5rem, 5vw, 5rem);
      font-weight: 800;
      margin-bottom: 1.5rem;
      background: var(--gradient-elegant);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: fadeInUp 0.8s ease-out;
    }

    .hero-text p {
      font-size: 1.3rem;
      color: var(--text-muted);
      margin-bottom: 2rem;
      animation: fadeInUp 0.8s ease-out 0.2s backwards;
    }

    .cta-buttons {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
      animation: fadeInUp 0.8s ease-out 0.4s backwards;
    }

    .btn {
      padding: 1rem 2.5rem;
      border-radius: 50px;
      font-weight: 600;
      text-decoration: none;
      transition: all 0.3s ease;
      display: inline-block;
      position: relative;
      overflow: hidden;
    }

    .btn-primary {
      background: var(--gradient-elegant);
      color: white;
      border: none;
    }

    .btn-primary::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.2);
      transform: translate(-50%, -50%);
      transition: width 0.6s, height 0.6s;
    }

    .btn-primary:hover::before {
      width: 300px;
      height: 300px;
    }

    .btn-secondary {
      background: transparent;
      color: var(--primary);
      border: 2px solid var(--primary);
    }

    .btn-secondary:hover {
      background: var(--primary);
      color: white;
      transform: translateY(-3px);
      box-shadow: 0 10px 25px rgba(139, 115, 85, 0.3);
    }

    .hero-carousel {
      position: relative;
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
      animation: fadeInRight 0.8s ease-out 0.3s backwards;
    }

    .carousel-container {
      position: relative;
      width: 100%;
      height: 400PX;
      overflow: hidden;
    }

    .carousel-track {
      display: flex;
      transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
      height: 100%;
    }

    .carousel-item {
      flex-shrink: 0;
      width: 100%;
      height: 100%;
    }

    .carousel-item img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .carousel-controls {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 10px;
      z-index: 10;
    }

    .carousel-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.5);
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .carousel-dot.active {
      background: var(--primary);
      width: 30px;
      border-radius: 6px;
    }

    .carousel-button {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(0, 217, 255, 0.2);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(0, 217, 255, 0.3);
      color: white;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
    }

    .carousel-button:hover {
      background: var(--primary);
      transform: translateY(-50%) scale(1.1);
    }

    .carousel-prev { left: 20px; }
    .carousel-next { right: 20px; }

    /* Section Styles */
    section {
      padding: 6rem 2rem;
      max-width: 1400px;
      margin: 0 auto;
    }

    .section-title {
      font-size: clamp(2rem, 4vw, 3.5rem);
      font-weight: 800;
      text-align: center;
      margin-bottom: 3rem;
      background: var(--gradient-elegant);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    /* Theme Section */
    .theme-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 3rem;
      margin-top: 3rem;
    }

    .theme-image {
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    }

    .theme-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.5s ease;
    }

    .theme-image:hover img {
      transform: scale(1.05);
    }

    .preparation-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
    }

    .prep-card {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(0, 217, 255, 0.1);
      border-radius: 15px;
      padding: 1.5rem;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .prep-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: var(--gradient-elegant);
      opacity: 0;
      transition: all 0.4s ease;
    }

    .prep-card:hover {
      transform: translateY(-5px);
      border-color: var(--primary);
      box-shadow: 0 10px 30px rgba(139, 115, 85, 0.2);
    }

    .prep-card:hover::before {
      left: 0;
      opacity: 0.1;
    }

    /* Modal for preparation images */
    .prep-modal {
      display: none;
      position: fixed;
      z-index: 10000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.9);
      align-items: center;
      justify-content: center;
      padding: 2rem;
    }

    .prep-modal.show {
      display: flex;
    }

    .prep-modal-wrapper {
      max-width: 800px;
      width: 100%;
      text-align: center;
    }

    .prep-modal-content {
      max-width: 100%;
      max-height: 60vh;
      object-fit: contain;
      border-radius: 10px;
      animation: zoomIn 0.3s ease;
      margin-bottom: 1rem;
    }

    .prep-modal-description {
      color: white;
      font-size: 1.1rem;
      line-height: 1.6;
      padding: 1rem;
      background: rgba(0, 0, 0, 0.5);
      border-radius: 10px;
      margin-top: 1rem;
    }

    .prep-modal-close {
      position: absolute;
      top: 20px;
      right: 40px;
      color: #fff;
      font-size: 40px;
      font-weight: bold;
      cursor: pointer;
      transition: 0.3s;
      z-index: 10001;
    }

    .prep-modal-close:hover {
      color: var(--accent);
    }

    /* Modal for carousel images */
    .carousel-modal {
      display: none;
      position: fixed;
      z-index: 10000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.95);
      align-items: center;
      justify-content: center;
    }

    .carousel-modal.show {
      display: flex;
    }

    .carousel-modal-content {
      max-width: 90%;
      max-height: 90vh;
      object-fit: contain;
      border-radius: 10px;
      animation: zoomIn 0.3s ease;
    }

    .carousel-modal-close {
      position: absolute;
      top: 20px;
      right: 40px;
      color: #fff;
      font-size: 40px;
      font-weight: bold;
      cursor: pointer;
      transition: 0.3s;
    }

    .carousel-modal-close:hover {
      color: var(--accent);
    }

    @keyframes zoomIn {
      from {
        transform: scale(0.5);
        opacity: 0;
      }
      to {
        transform: scale(1);
        opacity: 1;
      }
    }
    .products-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
      margin-top: 3rem;
    }

    .product-card {
      background: var(--dark-secondary);
      border-radius: 20px;
      overflow: hidden;
      transition: all 0.3s ease;
      border: 1px solid rgba(0, 217, 255, 0.1);
    }

    .product-card:hover {
      transform: translateY(-10px);
      box-shadow: 0 20px 40px rgba(139, 115, 85, 0.2);
    }

    .product-image {
      width: 100%;
      height: 250px;
      object-fit: cover;
    }

    .product-info {
      padding: 1.5rem;
    }

    .product-name {
      font-size: 1.3rem;
      font-weight: 700;
      color: var(--primary);
      margin-bottom: 0.5rem;
    }

    .product-price {
      font-size: 1.5rem;
      font-weight: 800;
      color: var(--accent);
      margin-bottom: 1rem;
    }

    .quantity-control {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 1rem;
      margin-bottom: 1rem;
    }

    .quantity-btn {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: none;
      background: var(--gradient-elegant);
      color: white;
      font-size: 1.2rem;
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    .quantity-btn:hover {
      transform: scale(1.1);
    }

    .quantity-input {
      width: 60px;
      text-align: center;
      padding: 0.5rem;
      border: 2px solid var(--primary);
      border-radius: 10px;
      background: var(--dark);
      color: var(--light);
      font-size: 1.1rem;
    }

    /* Contact Section */
    .contact-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 3rem;
      margin-top: 3rem;
    }

    .contact-card {
      background: var(--dark-secondary);
      border-radius: 20px;
      padding: 2rem;
      border: 1px solid rgba(139, 115, 85, 0.2);
    }

    .contact-item {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 1rem 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .contact-item:last-child {
      border-bottom: none;
    }

    .contact-item i {
      font-size: 1.5rem;
      color: var(--primary);
      width: 30px;
    }

    .map-container {
      border-radius: 20px;
      overflow: hidden;
      height: 400px;
    }

    .map-container iframe {
      width: 100%;
      height: 100%;
      border: 0;
    }

    .social-links {
      display: flex;
      gap: 1rem;
      justify-content: flex-start;
      align-items: center;
      margin-top: 2rem;
    }

    .social-icon {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(139, 115, 85, 0.3);
      color: var(--primary);
      font-size: 1.3rem;
      transition: all 0.3s ease;
      text-decoration: none;
    }
    .social-icon i {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
    }
    .social-icon:hover {
      background: var(--primary);
      color: white;
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(139, 115, 85, 0.3);
    }

    /* History Section */
    .history-section {
      background: var(--dark-secondary);
      border-radius: 20px;
      padding: 3rem;
      margin: 4rem 0;
      border: 1px solid rgba(139, 115, 85, 0.2);
    }

    .history-section p {
      font-size: 1.1rem;
      line-height: 1.8;
      color: var(--text-muted);
      margin-bottom: 1.5rem;
      text-align: justify;
    }

    .history-section p:first-of-type {
      font-size: 1.3rem;
      color: var(--accent);
      font-weight: 600;
      text-align: center;
    }

    /* Footer */
    .footer {
      background: var(--dark-secondary);
      padding: 3rem 2rem;
      margin-top: 4rem;
      border-top: 1px solid rgba(139, 115, 85, 0.2);
    }

    .footer-content {
      max-width: 1400px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 2rem;
    }

    .footer-section h3 {
      color: var(--accent);
      margin-bottom: 1rem;
      font-size: 1.2rem;
    }

    .footer-section p,
    .footer-section a {
      color: var(--text-muted);
      text-decoration: none;
      display: block;
      margin-bottom: 0.5rem;
      transition: color 0.3s ease;
    }

    .footer-section a:hover {
      color: var(--primary);
    }

    .complaints-book {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      background: rgba(139, 115, 85, 0.1);
      padding: 0.8rem 1.5rem;
      border-radius: 10px;
      border: 1px solid rgba(139, 115, 85, 0.3);
      color: var(--accent);
      text-decoration: none;
      font-weight: 600;
      transition: all 0.3s ease;
      margin-top: 1rem;
    }

    .complaints-book:hover {
      background: rgba(139, 115, 85, 0.2);
      transform: translateY(-2px);
    }

    .footer-bottom {
      text-align: center;
      margin-top: 2rem;
      padding-top: 2rem;
      border-top: 1px solid rgba(139, 115, 85, 0.1);
      color: var(--text-muted);
      font-size: 0.9rem;
    }
    .footer social-links i {
      text-align: center;
      
    }

 /* --- Personalizar JoinChat con tu estilo --- */
    .joinchat {
      --btn-size: 60px;
      --btn-bg: #25d366;
      --btn-color: #fff;
      position: fixed;
      bottom: 20px;
      z-index: 9999;
      transition: all .3s ease;
    }

    .joinchat.joinchat--right {
      right: 20px;
    }

    .joinchat.joinchat--left {
      left: 20px;
    }

    .joinchat__button {
      width: var(--btn-size);
      height: var(--btn-size);
      background: var(--btn-bg);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(37, 211, 102, 0.4);
      transition: all .3s ease;
      animation: joinchat-pulse 2s infinite;
    }

    .joinchat__button:hover {
      transform: scale(1.1);
      box-shadow: 0 6px 16px rgba(37, 211, 102, 0.6);
    }

    .joinchat__button::before {
      content: '';
      width: 30px;
      height: 30px;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Cpath fill='white' d='M16 0C7.164 0 0 7.164 0 16c0 2.825.736 5.481 2.023 7.793L.696 30.584l7.063-1.852A15.923 15.923 0 0016 32c8.836 0 16-7.164 16-16S24.836 0 16 0zm0 29.333c-2.547 0-4.932-.709-6.963-1.943l-.5-.297-5.139 1.348 1.372-5.016-.327-.518A13.262 13.262 0 012.667 16c0-7.364 5.969-13.333 13.333-13.333S29.333 8.636 29.333 16 23.364 29.333 16 29.333z'/%3E%3Cpath fill='white' d='M23.136 19.327c-.364-.182-2.155-1.064-2.489-1.182-.333-.118-.576-.182-.818.182-.242.364-.939 1.182-1.152 1.424-.212.242-.424.273-.788.091-.364-.182-1.536-.567-2.927-1.806-1.082-.964-1.812-2.155-2.024-2.519-.212-.364-.023-.561.159-.742.164-.164.364-.424.545-.636.182-.212.242-.364.364-.606.121-.242.061-.455-.03-.636-.091-.182-.818-1.97-1.121-2.697-.296-.709-.597-.612-.818-.624-.212-.012-.455-.015-.697-.015-.242 0-.636.091-.97.455-.333.364-1.273 1.242-1.273 3.03s1.303 3.515 1.485 3.758c.182.242 2.567 3.915 6.218 5.491.869.376 1.545.6 2.073.768.872.277 1.667.237 2.294.143.7-.105 2.155-.881 2.458-1.733.303-.851.303-1.581.212-1.733-.091-.152-.333-.242-.697-.424z'/%3E%3C/svg%3E");
      background-size: contain;
      background-position: center;
      background-repeat: no-repeat;
    }

    @keyframes joinchat-pulse {
      0%, 100% {
        box-shadow: 0 4px 12px rgba(37, 211, 102, 0.4);
      }
      50% {
        box-shadow: 0 4px 20px rgba(37, 211, 102, 0.7);
      }
    }

    .joinchat[hidden] {
      display: none;
    }
    /* Responsive */
    @media (max-width: 768px) {
      .hamburger {
        display: flex;
      }

      .nav-menu {
        position: fixed;
        top: 80px;
        left: -100%;
        width: 100%;
        background: rgba(10, 14, 39, 0.98);
        flex-direction: column;
        padding: 2rem;
        transition: left 0.3s ease;
      }

      .nav-menu.active {
        left: 0;
      }

      .hero-content,
      .theme-grid,
      .contact-grid {
        grid-template-columns: 1fr;
      }

      .preparation-grid {
        grid-template-columns: 1fr;
      }

      .carousel-container {
        width: 100%;
        height: 220px;
      }
    }
    /* üîπ Modal de im√°genes del carrusel */
.carousel-modal {
  display: none; /* oculto por defecto */
  position: fixed;
  z-index: 1000;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  background-color: rgba(0,0,0,0.8); /* fondo oscuro transl√∫cido */
  justify-content: center;
  align-items: center;
}

.carousel-modal.show {
  display: flex; /* se muestra al hacer clic */
}

.carousel-modal-content {
  max-width: 90%;
  max-height: 90%;
  border-radius: 10px;
  box-shadow: 0 4px 20px rgba(0,0,0,0.5);
  animation: zoomIn 0.3s ease;
}

/* Bot√≥n de cerrar */
.carousel-modal-close {
  position: absolute;
  top: 20px;
  right: 35px;
  color: #fff;
  font-size: 40px;
  font-weight: bold;
  cursor: pointer;
  transition: 0.3s;
}

.carousel-modal-close:hover {
  color: #ff5555;
}

/* Animaci√≥n suave */
@keyframes zoomIn {
  from { transform: scale(0.7); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}
/* üì± Ajustes para m√≥viles */
@media (max-width: 768px) {
  /* Hero */
  .hero {
    margin-top: 70px; /* Asegura que haya suficiente espacio debajo del header */
  }
  .hero-content {
    grid-template-columns: 1fr; /* de dos columnas a una sola */
    text-align: center;
  }
  .hero-text h1 {
    font-size: 2rem; /* m√°s peque√±o */
  }
  .hero-text p {
    font-size: 1rem;
  }
  .cta-buttons {
    justify-content: center;
  }
  /* Carrusel */
  .carousel-container {
    height: 220px; /* ya lo tienes, buen tama√±o para m√≥vil */
  }
  .carousel-button {
    width: 40px;
    height: 40px;
    font-size: 1.2rem;
  }
  /* Modal del carrusel */
  .carousel-modal-content {
    max-width: 95%; /* casi todo el ancho disponible */
    max-height: 70vh; /* menos alto para no tapar botones del m√≥vil */
  }
  .carousel-modal-close {
    font-size: 30px; /* bot√≥n de cerrar m√°s peque√±o */
    top: 10px;
    right: 15px;
  }
  /* Preparaciones */
  .preparation-grid {
    grid-template-columns: 1fr; /* en columna */
  }
  /* Contacto */
  .contact-grid {
    grid-template-columns: 1fr;
  }
  .contact-card {
      text-align: center; /* Centra el texto de direcci√≥n/tel√©fono */
      padding: 1.5rem; /* Opcional: ajusta el padding para m√≥viles */
  }
  social-links {
    justify-content: center; /* Centra los √≠conos en el medio de la tarjeta */
  }
  /* Footer */
  .footer-content {
    grid-template-columns: 1fr;
    text-align: center;
  }
  .social-links {
    justify-content: center;
  }
  /* WhatsApp flotante m√°s peque√±o */
  .whatsapp-float {
    width: 50px;
    height: 50px;
    font-size: 1.6rem;
    bottom: 20px;
    right: 20px;
  }
} 
/* üì≤ Ajustes para pantallas muy peque√±as (menos de 480px) */
@media (max-width: 480px) {
  .hero-text h1 {
    font-size: 1.7rem;
  }
  .btn {
    padding: 0.8rem 1.5rem;
    font-size: 0.9rem;
  }
  .carousel-container {
    height: 180px;
  }
  .carousel-modal-content {
    max-width: 100%;
    max-height: 65vh;
  }
}

#reservation-message {
      position: fixed;
      top:300px;
      left: 50%;
      /* CORRECCI√ìN 1: Centrado sin escalado inicial */
      transform: translate(-50%, -50%);
      background-color: rgba(0,0,0,0.5);
      color: white;
      padding: 25px 40px;
      border-radius: 10px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.4);
      z-index: 10000;
      font-size: 1.1em;
      font-weight: bold;
      text-align: center;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out, visibility 0.5s;
      max-width: 90%;
      box-sizing: border-box;
    }
#reservation-message.show {
  opacity: 1;
  visibility: visible;
  /* CORRECCI√ìN 2: Animaci√≥n de entrada al mostrar */
  transform: translate(-50%, -50%) scale(1);
}

/* CORRECCI√ìN 3: Modal de Registro (Oculto por defecto y se muestra con la clase .show) */
.register-modal {
  display: none; /* Oculto por defecto */
  justify-content: center;
  align-items: center;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.7);
  z-index: 2000;
}
.register-modal.show {
    display: flex; /* Se muestra al agregar la clase 'show' */
}

.register-box {
  background: white;
  color: black;
  padding: 2rem;
  border-radius: 10px;
  width: 90%;
  max-width: 400px;
}
.register-box h2 {
  margin-bottom: 1rem;
  text-align: center;
}
.register-box label {
  display: block;
  margin-top: 1rem;
}
.register-box input {
  width: 100%;
  padding: 0.7rem;
  margin-top: 0.5rem;
  border: 1px solid #ccc;
  border-radius: 5px;
}
.register-box button {
  margin-top: 1.5rem;
  width: 100%;
  padding: 0.8rem;
  background: #25D366;
  color: white;
  border: none;
  border-radius: 5px;
  font-weight: bold;
  cursor: pointer;
} 
</style>
</head>
<body class="lang-active-es">
  <header class="modern-header">
    <div class="header-content">
      <a href="#" class="logo">
        <img src="pikalogo.png" alt="La Picanter√≠a" onerror="this.src='https://placehold.co/60x60/00D9FF/0A0E27?text=LP'">
        <span>La Picanter√≠a</span>
      </a>
      <nav>
        <ul class="nav-menu" id="navMenu">
          <li><a href="#hero"><span class="lang-es inline-content">Inicio</span><span class="lang-en inline-content">Home</span></a></li>
          <li><a href="#theme"><span class="lang-es inline-content">Tem√°tica</span><span class="lang-en inline-content">Theme</span></a></li>
          <li><a href="#history"><span class="lang-es inline-content">Historia</span><span class="lang-en inline-content">History</span></a></li>
          <li><a href="#products"><span class="lang-es inline-content">Productos</span><span class="lang-en inline-content">Products</span></a></li>
          <li><a href="menu.html"><span class="lang-es inline-content">Carta</span><span class="lang-en inline-content">Menu</span></a></li>
          <li><a href="#contact"><span class="lang-es inline-content">Contacto</span><span class="lang-en inline-content">Contact</span></a></li>
          <div class="language-toggle">
            <button id="langEs" class="active">üá™üá∏ ES</button>
            <button id="langEn">üá¨üáß EN</button>
          </div>
        </ul>
      </nav>
      <div id="reservation-message" class="flash-message info">
        <span class="lang-es inline-content">No contamos con reserva, todo es por orden de llegada.</span>
        <span class="lang-en inline-content">We do not take reservations; it's all first-come, first-served.</span>
      </div>
      <div class="hamburger" id="hamburger">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  </header>

  <div class="register-modal" id="registerModal">
    <div class="register-box">
      <h2>
        <span class="lang-es">Registro</span>
        <span class="lang-en">Sign Up</span>
      </h2>
      <form id="registerForm">
        <label>
          <span class="lang-es">Nombre Completo</span>
          <span class="lang-en">Full Name</span>
        </label>
        <input type="text" id="regName" required>
        <label>
          <span class="lang-es">Tel√©fono (WhatsApp)</span>
          <span class="lang-en">Phone (WhatsApp)</span>
        </label>
        <input type="tel" id="regPhone" required pattern="[0-9]{9,}">
        <label>Email</label>
        <input type="email" id="regEmail" required>
        <button type="submit">
          <span class="lang-es">Registrarme</span>
          <span class="lang-en">Register</span>
        </button>
      </form>
    </div>
  </div>

  <section class="hero" id="hero">
    <div class="hero-content">
      <div class="hero-text">
        <h1>
          <span class="lang-es inline-content">El Per√∫ en tu Mesa</span>
          <span class="lang-en inline-content">Peru on Your Table</span>
        </h1>
        <p>
          <span class="lang-es inline-content">Descubre la aut√©ntica gastronom√≠a peruana. Pescado fresco, tradici√≥n y sabor en cada plato.</span>
          <span class="lang-en inline-content">Discover authentic Peruvian cuisine. Fresh fish, tradition, and flavor in every dish.</span>
        </p>
        <div class="cta-buttons">
          <a href="#products" class="btn btn-primary">
            <span class="lang-es inline-content">Ver Men√∫</span>
            <span class="lang-en inline-content">View Menu</span>
          </a>
          <a href="#contact" class="btn btn-secondary">
            <span class="lang-es inline-content">Cont√°ctanos</span>
            <span class="lang-en inline-content">Contact Us</span>
          </a>
        </div>
      </div>
      <div class="hero-carousel">
        <div class="carousel-container">
          <div class="carousel-track" id="carouselTrack"></div>
          <button class="carousel-button carousel-prev" id="prevBtn">‚Äπ</button>
          <button class="carousel-button carousel-next" id="nextBtn">‚Ä∫</button>
          <div class="carousel-controls" id="carouselDots"></div>
        </div>
      </div>
    </div>
  </section>

  <section id="theme">
    <h2 class="section-title">
      <span class="lang-es inline-content">Elige Tu Preparaci√≥n</span>
      <span class="lang-en inline-content">Choose Your Preparation</span>
    </h2>
    <div class="theme-grid">
      <div class="theme-image">
        <img src="s100.jpg" alt="Pescados frescos" onerror="this.src='https://placehold.co/600x400/00D9FF/0A0E27?text=Fresh+Fish'">
      </div>
      <div class="preparation-grid">
        <div class="prep-card" data-prep="ceviche">
          <span class="lang-es inline-content">En Ceviche</span>
          <span class="lang-en inline-content">Ceviche</span>
        </div>
        <div class="prep-card" data-prep="jaladito">
          <span class="lang-es inline-content">Jaladito Moche</span>
          <span class="lang-en inline-content">Jaladito Moche</span>
        </div>
        <div class="prep-card" data-prep="parrilla">
          <span class="lang-es inline-content">A la Parrilla</span>
          <span class="lang-en inline-content">Grilled</span>
        </div>
        <div class="prep-card" data-prep="ajo">
          <span class="lang-es inline-content">Al Ajo y Mantequilla</span>
          <span class="lang-en inline-content">Garlic Butter</span>
        </div>
        <div class="prep-card" data-prep="jalea">
          <span class="lang-es inline-content">En Jalea Lime√±a</span>
          <span class="lang-en inline-content">Lime√±a Style</span>
        </div>
        <div class="prep-card" data-prep="vapor">
          <span class="lang-es inline-content">Al Vapor</span>
          <span class="lang-en inline-content">Steamed</span>
        </div>
        <div class="prep-card" data-prep="sudado">
          <span class="lang-es inline-content">En Sudado</span>
          <span class="lang-en inline-content">Sudado</span>
        </div>
        <div class="prep-card" data-prep="escabeche">
          <span class="lang-es inline-content">En Escabeche</span>
          <span class="lang-en inline-content">Escabeche</span>
        </div>
      </div>
    </div>
  </section>

  <div id="prepModal" class="prep-modal">
    <span class="prep-modal-close" id="prepModalClose">&times;</span>
    <div class="prep-modal-wrapper">
      <img class="prep-modal-content" id="prepModalImage">
      <div class="prep-modal-description" id="prepModalDescription"></div>
    </div>
  </div>

  <div id="carouselModal" class="carousel-modal">
    <span class="carousel-modal-close" id="carouselModalClose">&times;</span>
    <img class="carousel-modal-content" id="carouselModalImage">
  </div>

  <!-- History Section -->
  <section id="history">
    <h2 class="section-title">
      <span class="lang-es inline-content">Nuestra Historia</span>
      <span class="lang-en inline-content">Our History</span>
    </h2>
    <div class="history-section">
      <p>
        <span class="lang-es inline-content">La Picanter√≠a - El Per√∫ servido en su mesa.</span>
        <span class="lang-en inline-content">La Picanter√≠a - Peru served at your table.</span>
      </p>
      <p>
        <span class="lang-es inline-content">
          En La Picanter√≠a creemos que la buena mesa es un acto de memoria y celebraci√≥n.
          Aqu√≠ no solo se viene a comer: se viene a encontrarse con el Per√∫.
        </span>
        <span class="lang-en inline-content">
          At La Picanter√≠a we believe that good dining is an act of memory and celebration.
          Here, you don't just come to eat ‚Äì you come to encounter Peru.
        </span>
      </p>
      <p>
        <span class="lang-es inline-content">
          Nacimos inspirados en las antiguas Picanter√≠as del Norte y del Sur, esos espacios donde la cocina se compart√≠a en grandes mesas y el sabor un√≠a a familias enteras. Hoy, desde Lima, mantenemos vivo ese esp√≠ritu, combinando tradici√≥n y modernidad en cada plato.
        </span>
        <span class="lang-en inline-content">
          Inspired by the traditional picanter√≠as of the North and South, those lively spaces where food was shared at large tables and flavor brought entire families together, we keep that spirit alive today from Lima, blending tradition and modernity in every dish.
        </span>
      </p>
      <p>
        <span class="lang-es inline-content">
          A lo largo de toda la costa, nuestros pescadores nos traen el mar fresco cada ma√±ana; los agricultores, la riqueza de nuestra tierra; y nuestro equipo, con respeto y pasi√≥n, transforma esos productos en experiencias que hablan de historia y orgullo.
        </span>
        <span class="lang-en inline-content">
          Along our vast coastline, fishermen bring us the freshest catch every morning; from the land, farmers provide the richness of their harvests; and our team, with respect and passion, transforms these ingredients into experiences that speak of history and pride.
        </span>
      </p>
      <p>
        <span class="lang-es inline-content">
          En nuestras mesas todo se comparte: desde el cl√°sico cebiche, los guisos, los sudados, los asados, la parrilla. Sabores intensos, honestos, nacidos del fuego y de la paciencia, que nos recuerdan qui√©nes somos y de d√≥nde venimos.
        </span>
        <span class="lang-en inline-content">
          At our tables, everything is meant to be shared: from the classic cebiche to stews, hearty fish broths, slow roasts, and dishes from the grill. Bold, honest flavors born of fire and patience, reminding us who we are and where we came from.
        </span>
      </p>
      <p>
        <span class="lang-es inline-content">
          La Picanter√≠a es un homenaje al Per√∫.
          Un punto de encuentro para amigos, familias, viajeros y amantes de la cocina peruana que buscan autenticidad, producto y tradici√≥n servidos con orgullo.
        </span>
        <span class="lang-en inline-content">
          La Picanter√≠a is a tribute to Peru.
          A meeting place for friends, families, travelers, and lovers of Peruvian cuisine, all seeking authenticity, the finest ingredients, and tradition served with pride.
        </span>
      </p>
      <p>
        <span class="lang-es inline-content">
          Bienvenido a La Picanter√≠a.
          Si√©ntese a la mesa. Aqu√≠ todo empieza.
        </span>
        <span class="lang-en inline-content">
          Welcome to La Picanter√≠a.
          Take a seat. This is where everything begins.
        </span>
      </p>
    </div>
  </section>

   <!-- Products Section -->
  <section id="products">
    <h2 class="section-title">
      <span class="lang-es inline-content">Los M√°s Solicitados</span>
      <span class="lang-en inline-content">Most Popular</span>
    </h2>
    <div class="products-container">
      <div class="product-card">
        <img src="jaladito 1.jpg" alt="Jaladito Moche" class="product-image" onerror="this.src='https://placehold.co/300x250/00D9FF/0A0E27?text=Jaladito'">
        <div class="product-info">
          <h3 class="product-name">JALADITO MOCHE</h3>
          <p class="product-price">S/ 99.00</p>
          <div class="quantity-control">
            <button class="quantity-btn">‚àí</button>
            <input type="number" value="1" min="1" class="quantity-input">
            <button class="quantity-btn">+</button>
          </div>
          <button class="btn btn-primary" style="width: 100%;">
            <span class="lang-es inline-content">A√±adir</span>
            <span class="lang-en inline-content">Add</span>
          </button>
        </div>
      </div>

      <div class="product-card">
        <img src="ceviche.jpg" alt="Ceviche" class="product-image" onerror="this.src='https://placehold.co/300x250/00D9FF/0A0E27?text=Ceviche'">
        <div class="product-info">
          <h3 class="product-name">CEVICHE DE PESCADO</h3>
          <p class="product-price">S/ 99.00</p>
          <div class="quantity-control">
            <button class="quantity-btn">‚àí</button>
            <input type="number" value="1" min="1" class="quantity-input">
            <button class="quantity-btn">+</button>
          </div>
          <button class="btn btn-primary" style="width: 100%;">
            <span class="lang-es inline-content">A√±adir</span>
            <span class="lang-en inline-content">Add</span>
          </button>
        </div>
      </div>

      <div class="product-card">
        <img src="pulpoparrilla.jpg" alt="Pulpo" class="product-image" onerror="this.src='https://placehold.co/300x250/00D9FF/0A0E27?text=Pulpo'">
        <div class="product-info">
          <h3 class="product-name">PULPO A LA PARRILLA</h3>
          <span class="product-price">S/ 89.00<span>
          <div class="quantity-control">
            <button class="quantity-btn">‚àí</button>
            <input type="number" value="1" min="1" class="quantity-input">
            <button class="quantity-btn">+</button>
          </div>
          <button class="btn btn-primary" style="width: 100%;">
            <span class="lang-es inline-content">A√±adir</span>
            <span class="lang-en inline-content">Add</span>
          </button>
        </div>
      </div>
    </div>
  </section>

  <!-- Contact Section -->
  <section id="contact">
    <h2 class="section-title">
      <span class="lang-es inline-content">Encu√©ntranos</span>
      <span class="lang-en inline-content">Find Us</span>
    </h2>
    <div class="contact-grid">
      <div class="contact-card">
        <div class="contact-item">
          <i class="fas fa-map-marker-alt"></i>
          <span>Jr. Francisco Moreno 388, Surquillo, Lima</span>
        </div>
        <div class="contact-item">
          <i class="fas fa-phone"></i>
          <span>+51 953 489 892</span>
        </div>
        <div class="contact-item">
          <i class="fas fa-envelope"></i>
          <span>lapicanteriasurquillo@gmail.com</span>
        </div>
        <div class="contact-item">
          <i class="fas fa-clock"></i>
          <span class="lang-es inline-content">Mar-Dom: 12:00 PM - 5:00 PM</span>
          <span class="lang-en inline-content">Tue-Sun: 12:00 PM - 5:00 PM</span>
        </div>
        <div class="social-links">
          <a href="https://www.facebook.com/share/1HTYw9wM1Q/" target="_blank" class="social-icon">
            <i class="fab fa-facebook-f"></i>
          </a>
          <a href="https://www.instagram.com/lapicanteriasurquillo?igsh=MWkwZXR5MDltbnJudQ==" target="_blank" class="social-icon">
            <i class="fab fa-instagram"></i>
          </a>
          <a href="https://wa.me/51953489892" target="_blank" class="social-icon">
            <i class="fab fa-whatsapp"></i>
          </a>
        </div>
      </div>
      <div class="map-container">
        <iframe
          src="https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d62414.91981038331!2d-77.074764!3d-12.1167718!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x9105c81045eb8aff%3A0x9cce78ba3005d3f2!2sLa%20Picanter%C3%ADa!5e0!3m2!1ses!2spe!4v1750265087532!5m2!1ses!2spe"
          loading="lazy"
          allowfullscreen>
        </iframe>
      </div>
    </div>
  </section>

  <!-- WhatsApp JoinChat Button -->
  <div class="joinchat joinchat--right" 
       data-settings='{
         "telephone":"51953489892",
         "mobile_only":false,
         "button_delay":1,
         "whatsapp_web":true,
         "qr":false,
         "message_views":1,
         "message_delay":5,
         "message_badge":false,
         "message_send":"Hola! Me gustar√≠a realizar un pedido."
       }' hidden aria-hidden="false">
    <div class="joinchat__button" role="button" tabindex="0" aria-label="Abrir chat de WhatsApp"></div>
  </div>


  <!-- Cart Toggle Button -->
  <div class="cart-toggle" id="cartToggle">
    <i class="fas fa-shopping-cart"></i>
    <span class="cart-badge" id="cartBadge">0</span>
  </div>

  <!-- Shopping Cart Sidebar -->
  <div class="cart-sidebar" id="cartSidebar">
    <div class="cart-header">
      <h3>
        <span class="lang-es inline-content">Mi Pedido</span>
        <span class="lang-en inline-content">My Order</span>
      </h3>
      <span class="cart-close" id="cartClose">&times;</span>
    </div>
    <div class="cart-items" id="cartItems">
      <div class="cart-empty">
        <i class="fas fa-shopping-basket" style="font-size: 3rem; color: var(--text-muted); margin-bottom: 1rem;"></i>
        <p>
          <span class="lang-es inline-content">Tu carrito est√° vac√≠o</span>
          <span class="lang-en inline-content">Your cart is empty</span>
        </p>
      </div>
    </div>
    <div class="cart-total">
      <div class="cart-total-text">
        <span>
          <span class="lang-es inline-content">Total:</span>
          <span class="lang-en inline-content">Total:</span>
        </span>
        <span>S/. <span id="cartTotal">0.00</span></span>
      </div>
    </div>
    <button class="cart-checkout" id="cartCheckout">
      <i class="fab fa-whatsapp"></i>
      <span class="lang-es inline-content">Enviar por WhatsApp</span>
      <span class="lang-en inline-content">Send via WhatsApp</span>
    </button>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-section">
        <h3>
          <span class="lang-es inline-content">Informaci√≥n Legal</span>
          <span class="lang-en inline-content">Legal Information</span>
        </h3>
        <p><strong>RUC:</strong> 20547577435</p>
        <p><strong>
          <span class="lang-es inline-content">Raz√≥n Social:</span>
          <span class="lang-en inline-content">Business Name:</span>
        </strong> Gourmet ASP SAC</p>
        <a href="#" class="complaints-book">
          <i class="fas fa-book"></i>
          <span class="lang-es inline-content">Libro de Reclamaciones</span>
          <span class="lang-en inline-content">Complaints Book</span>
        </a>
      </div>

      <div class="footer-section">
        <h3>
          <span class="lang-es inline-content">Horarios</span>
          <span class="lang-en inline-content">Schedule</span>
        </h3>
        <p>
          <span class="lang-es inline-content">Martes a Domingo</span>
          <span class="lang-en inline-content">Tuesday to Sunday</span>
        </p>
        <p>12:00 PM - 5:00 PM</p>
        <p style="margin-top: 1rem;">
          <span class="lang-es inline-content">Jr. Francisco Moreno 388</span>
          <span class="lang-en inline-content">Jr. Francisco Moreno 388</span>
        </p>
        <p>Surquillo, Lima</p>
      </div>

      <div class="footer-section">
        <h3>
          <span class="lang-es inline-content">Contacto</span>
          <span class="lang-en inline-content">Contact</span>
        </h3>
        <a href="tel:+51953489892">+51 953 489 892</a>
        <a href="mailto:lapicanteriasurquillo@gmail.com">lapicanteriasurquillo@gmail.com</a>
        <div class="social-links" style="justify-content: center; margin-top: 1rem;">
          <a href="https://www.facebook.com/share/1HTYw9wM1Q/" target="_blank" class="social-icon">
            <i class="fab fa-facebook-f"></i>
          </a>
          <a href="https://www.instagram.com/lapicanteriasurquillo?igsh=MWkwZXR5MDltbnJudQ==" target="_blank" class="social-icon">
            <i class="fab fa-instagram"></i>
          </a>
        </div>
      </div>
    </div>

    <div class="footer-bottom">
      <p>
        <span class="lang-es inline-content">&copy; 2025 La Picanter√≠a - Gourmet ASP SAC. Todos los derechos reservados.</span>
        <span class="lang-en inline-content">&copy; 2025 La Picanter√≠a - Gourmet ASP SAC. All rights reserved.</span>
      </p>
    </div>
  </footer>
<script src="script.js"></script>
 <script src="https://cdn.jsdelivr.net/npm/joinchat@4.5.17/build/joinchat.min.js"></script>
  <script>
    // ** CORRECCI√ìN 1: Centrar y mostrar la alerta de reserva **
    const reservationMessage = document.getElementById('reservation-message');
    if (reservationMessage) {
      // Muestra el mensaje de reserva centrado despu√©s de un breve delay
      setTimeout(() => {
        reservationMessage.classList.add('show');
      }, 500); // Aparece despu√©s de 0.5 segundos

      // Oculta el mensaje autom√°ticamente despu√©s de 5 segundos
      setTimeout(() => {
        reservationMessage.classList.remove('show');
      }, 5500); // Permanece visible por 5 segundos
    }

    // ** CORRECCI√ìN 2: L√≥gica para mostrar/ocultar el Modal de Registro **
    const registerModal = document.getElementById('registerModal');
    
    // Funci√≥n para abrir el modal
    function openRegisterModal() {
      if (registerModal) {
        // Usamos la nueva clase 'show' para mostrarlo
        registerModal.classList.add('show');
      }
    }
    
    // Funci√≥n para cerrar el modal haciendo clic fuera o con la tecla ESC
    function closeRegisterModal(event) {
      // Cierra si se hace clic en el fondo del modal (el propio registerModal)
      // o si se presiona la tecla Escape
      if (registerModal && (event.target === registerModal || event.key === 'Escape')) {
        registerModal.classList.remove('show');
      }
    }

    if (registerModal) {
      // Listener para cerrar al hacer clic en el fondo oscuro
      registerModal.addEventListener('click', closeRegisterModal);
      // Listener para cerrar al presionar ESC
      document.addEventListener('keydown', closeRegisterModal);
    }
    document.addEventListener('DOMContentLoaded', function() {
      const joinchat = document.querySelector('.joinchat');
      
      if (joinchat) {
        // Obtener configuraci√≥n del data-settings
        const settings = JSON.parse(joinchat.getAttribute('data-settings') || '{}');
        
        // Mostrar el bot√≥n despu√©s del delay configurado
        setTimeout(() => {
          joinchat.removeAttribute('hidden');
          joinchat.setAttribute('aria-hidden', 'false');
        }, (settings.button_delay || 1) * 1000);
        
        // Click handler para abrir WhatsApp
        const button = joinchat.querySelector('.joinchat__button');
        if (button) {
          button.addEventListener('click', function() {
            const phone = settings.telephone || '51927743956';
            const message = encodeURIComponent(settings.message_send || 'Hola! Me gustar√≠a realizar un pedido.');
            
            // Detectar si es m√≥vil o desktop
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            
            let whatsappUrl;
            if (isMobile || !settings.whatsapp_web) {
              whatsappUrl = `https://wa.me/${phone}?text=${message}`;
            } else {
              whatsappUrl = `https://web.whatsapp.com/send?phone=${phone}&text=${message}`;
            }
            
            window.open(whatsappUrl, '_blank');
          });
        }
      }
    });
   // --- L√ìGICA DE IDIOMA ---
let currentLanguage = localStorage.getItem('language') || 'es';
const langEsBtn = document.getElementById('langEs');
const langEnBtn = document.getElementById('langEn');

function setLanguage(lang) {
    currentLanguage = lang;
    localStorage.setItem('language', lang);
    document.body.classList.remove('lang-active-es', 'lang-active-en');
    document.body.classList.add(`lang-active-${lang}`);
    
    document.querySelectorAll('.language-toggle button').forEach(button => {
        button.classList.remove('active');
    });
    
    if (langEsBtn && langEnBtn) {
        if (lang === 'es') {
            langEsBtn.classList.add('active');
        } else {
            langEnBtn.classList.add('active');
        }
    }

    document.documentElement.lang = lang;

    if (reservationMessage) {
        clearTimeout(reservationMessage.hideTimeout);
        reservationMessage.classList.add('show');
        reservationMessage.hideTimeout = setTimeout(() => {
            reservationMessage.classList.remove('show');
        }, 5000);
    }
}

// Llama a la funci√≥n al inicio para que el idioma se configure al cargar la p√°gina
setLanguage(currentLanguage);

// Event Listeners para los botones
if (langEsBtn) {
    langEsBtn.addEventListener('click', () => setLanguage('es'));
}
if (langEnBtn) {
    langEnBtn.addEventListener('click', () => setLanguage('en'));
}

// --- Resto de la funcionalidad del sitio web ---
// Hamburger Menu
const hamburger = document.getElementById('hamburger');
const navMenu = document.getElementById('navMenu');

hamburger.addEventListener('click', () => {
    navMenu.classList.toggle('active');
    hamburger.classList.toggle('open');
});

// Close menu when clicking a link
document.querySelectorAll('.nav-menu a').forEach(link => {
    link.addEventListener('click', () => {
        navMenu.classList.remove('active');
        hamburger.classList.remove('open');
    });
});

// Header scroll effect
const header = document.querySelector('.modern-header');
window.addEventListener('scroll', () => {
    if (window.scrollY > 100) {
        header.classList.add('scrolled');
    } else {
        header.classList.remove('scrolled');
    }
});

// Carousel functionality
const carouselTrack = document.getElementById('carouselTrack');
const dotsContainer = document.getElementById('carouselDots');
const prevBtn = document.getElementById('prevBtn');
const nextBtn = document.getElementById('nextBtn');

const images = [
    'LP 1 (1).jpg',
    'LP 2.jpg',
    '44pimentel1.jpg',
    'LP 5.jpg',
    'LP 17.jpg',
    'LP 10.jpg',
    'LP 28.jpg',
    'LP 29.jpg',
    'LP 32.jpg',
    'LP 42.jpg'
];

let currentSlide = 0;
let autoSlideInterval;

// Create carousel items
images.forEach((img, index) => {
    const item = document.createElement('div');
    item.className = 'carousel-item';
    item.innerHTML = `<img src="${img}" alt="Plato ${index + 1}" onerror="this.src='https://placehold.co/800x600/00D9FF/0A0E27?text=Dish+${index + 1}'">`;
    carouselTrack.appendChild(item);

    const dot = document.createElement('div');
    dot.className = `carousel-dot ${index === 0 ? 'active' : ''}`;
    dot.addEventListener('click', () => goToSlide(index));
    dotsContainer.appendChild(dot);
});

function updateCarousel() {
    const width = carouselTrack.offsetWidth;
    carouselTrack.style.transform = `translateX(-${currentSlide * width}px)`;
    
    document.querySelectorAll('.carousel-dot').forEach((dot, index) => {
        dot.classList.toggle('active', index === currentSlide);
    });
}

function goToSlide(index) {
    currentSlide = index;
    updateCarousel();
    resetAutoSlide();
}

function nextSlide() {
    currentSlide = (currentSlide + 1) % images.length;
    updateCarousel();
}

function prevSlide() {
    currentSlide = (currentSlide - 1 + images.length) % images.length;
    updateCarousel();
}

function startAutoSlide() {
    autoSlideInterval = setInterval(nextSlide, 4000);
}

function resetAutoSlide() {
    clearInterval(autoSlideInterval);
    startAutoSlide();
}

if (prevBtn) {
  prevBtn.addEventListener('click', () => {
    prevSlide();
    resetAutoSlide();
  });
}

if (nextBtn) {
  nextBtn.addEventListener('click', () => {
    nextSlide();
    resetAutoSlide();
  });
}

const carouselContainer = document.querySelector('.carousel-container');
if (carouselContainer) {
    carouselContainer.addEventListener('mouseenter', () => clearInterval(autoSlideInterval));
    carouselContainer.addEventListener('mouseleave', startAutoSlide);
}

window.addEventListener('resize', updateCarousel);

startAutoSlide();
updateCarousel();

// Quantity controls
document.querySelectorAll('.quantity-control').forEach(control => {
    const input = control.querySelector('.quantity-input');
    const buttons = control.querySelectorAll('.quantity-btn');
    
    if (buttons[0]) {
      buttons[0].addEventListener('click', () => {
          if (input.value > 1) input.value = parseInt(input.value) - 1;
      });
    }
    
    if (buttons[1]) {
      buttons[1].addEventListener('click', () => {
          input.value = parseInt(input.value) + 1;
      });
    }
});

// Smooth scroll
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function(e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
            target.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
    });
});

// Preparation cards modal functionality
const prepCards = document.querySelectorAll('.prep-card');
const prepModal = document.getElementById('prepModal');
const prepModalImage = document.getElementById('prepModalImage');
const prepModalClose = document.getElementById('prepModalClose');

const prepImages = {
    'ceviche': 'ceviche.jpg',
    'jaladito': 'jaladito.jpg',
    'parrilla': 'ala parrilla.jpg',
    'ajo': 'ajo.jpg',
    'jalea': 'jlime√±a.jpg',
    'vapor': 'al vapor.jpg',
    'sudado': 'sudado.jpg',
    'escabeche': 'escabeche.jpg'
};

prepCards.forEach(card => {
    card.addEventListener('click', () => {
        const prepType = card.getAttribute('data-prep');
        const imageSrc = prepImages[prepType];
        
        if (imageSrc) {
            prepModalImage.src = imageSrc;
            prepModalImage.onerror = function() {
                this.src = 'https://placehold.co/800x600/8B7355/FFFFFF?text=' + prepType;
            };
            prepModal.classList.add('show');
        }
    });
});

if (prepModalClose) {
  prepModalClose.addEventListener('click', () => {
      prepModal.classList.remove('show');
  });
}

window.addEventListener('click', (e) => {
    if (e.target === prepModal) {
        prepModal.classList.remove('show');
    }
});
window.addEventListener('click', (e) => {
    if (e.target === prepModal) {
        prepModal.classList.remove('show');
    }
});
// üöÄ Usamos el modal que ya existe en el HTML
const carouselModal = document.getElementById('carouselModal');
const carouselModalImg = document.getElementById('carouselModalImage');
const carouselModalClose = document.getElementById('carouselModalClose');
// Abrir modal al hacer clic en una imagen del carrusel
document.querySelectorAll('.carousel-item img').forEach(img => {
    img.addEventListener('click', () => {
        carouselModalImg.src = img.src;
        carouselModal.classList.add('show');
    });
});

// Cerrar modal con la X
if (carouselModalClose) {
  carouselModalClose.addEventListener('click', () => {
      carouselModal.classList.remove('show');
  });
}

// Cerrar modal al hacer clic fuera de la imagen
window.addEventListener('click', (e) => {
    if (e.target === carouselModal) {
        carouselModal.classList.remove('show');
    }
});

// ========================================
// SISTEMA DE CARRITO MODERNO - LA PICANTER√çA
// ========================================

const WHATSAPP_NUMBER = "51953489892";
let cart = [];

// Elementos del DOM
const cartToggle = document.getElementById("cartToggle");
const cartSidebar = document.getElementById("cartSidebar");
const cartClose = document.getElementById("cartClose");
const cartItemsContainer = document.getElementById("cartItems");
const cartBadge = document.getElementById("cartBadge");
const cartTotalElement = document.getElementById("cartTotal");
const cartCheckout = document.getElementById("cartCheckout");
const registerForm = document.getElementById("registerForm");

// Crear estilos modernos
const modernStyles = document.createElement("style");
modernStyles.textContent = `
  /* Carrito Sidebar Moderno */
  .cart-sidebar {
    position: fixed;
    right: -450px;
    top: 0;
    width: 450px;
    max-width: 100vw;
    height: 100vh;
    background: linear-gradient(180deg, #1C1917 0%, #292524 100%);
    box-shadow: -10px 0 40px rgba(0,0,0,0.5);
    z-index: 1001;
    transition: right 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    display: flex;
    flex-direction: column;
    border-left: 2px solid rgba(139, 115, 85, 0.3);
  }
  
  .cart-sidebar.active {
    right: 0;
  }
  
  /* Header del Carrito */
  .cart-header {
    padding: 2rem;
    background: rgba(139, 115, 85, 0.1);
    backdrop-filter: blur(10px);
    border-bottom: 2px solid rgba(139, 115, 85, 0.2);
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: relative;
  }
  
  .cart-header::before {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg, transparent, #8B7355, transparent);
  }
  
  .cart-header h3 {
    font-size: 1.5rem;
    font-weight: 700;
    background: linear-gradient(135deg, #8B7355 0%, #C9A86A 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  
  .cart-header h3::before {
    content: 'üõí';
    -webkit-text-fill-color: initial;
  }
  
  .cart-close {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.8rem;
    cursor: pointer;
    color: var(--text-muted);
    transition: all 0.3s ease;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.05);
  }
  
  .cart-close:hover {
    background: rgba(255, 85, 85, 0.2);
    color: #ff5555;
    transform: rotate(90deg);
  }
  
  /* Items del Carrito */
  .cart-items {
    flex: 1;
    overflow-y: auto;
    padding: 1.5rem;
    background: rgba(0, 0, 0, 0.2);
  }
  
  .cart-items::-webkit-scrollbar {
    width: 8px;
  }
  
  .cart-items::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.2);
  }
  
  .cart-items::-webkit-scrollbar-thumb {
    background: rgba(139, 115, 85, 0.5);
    border-radius: 10px;
  }
  
  .cart-items::-webkit-scrollbar-thumb:hover {
    background: rgba(139, 115, 85, 0.8);
  }
  
  /* Item Individual Moderno */
  .cart-item {
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(139, 115, 85, 0.2);
    border-radius: 15px;
    padding: 1.5rem;
    margin-bottom: 1rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
  }
  
  .cart-item::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(139, 115, 85, 0.1), transparent);
    transition: left 0.5s ease;
  }
  
  .cart-item:hover {
    border-color: var(--primary);
    transform: translateX(-5px);
    box-shadow: 5px 5px 20px rgba(139, 115, 85, 0.2);
  }
  
  .cart-item:hover::before {
    left: 100%;
  }
  
  .cart-item-info {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }
  
  .cart-item-name {
    font-weight: 700;
    font-size: 1.1rem;
    color: var(--light);
    margin-bottom: 0.3rem;
  }
  
  .cart-item-qty {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--text-muted);
    font-size: 0.95rem;
    background: rgba(139, 115, 85, 0.1);
    padding: 0.3rem 0.8rem;
    border-radius: 20px;
    width: fit-content;
  }
  
  .cart-item-qty i {
    color: var(--accent);
  }
  
  .cart-item-actions {
    display: flex;
    align-items: center;
    gap: 1rem;
  }
  
  .cart-item-price {
    font-size: 1.3rem;
    font-weight: 800;
    color: var(--accent);
    text-shadow: 0 2px 10px rgba(201, 168, 106, 0.3);
  }
  
  .cart-item-remove {
    width: 40px;
    height: 40px;
    background: rgba(255, 85, 85, 0.1);
    border: 1px solid rgba(255, 85, 85, 0.3);
    color: #ff5555;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1rem;
  }
  
  .cart-item-remove:hover {
    background: rgba(255, 85, 85, 0.2);
    transform: scale(1.1) rotate(10deg);
    box-shadow: 0 5px 15px rgba(255, 85, 85, 0.3);
  }
  
  /* Carrito Vac√≠o Moderno */
  .cart-empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    text-align: center;
    color: var(--text-muted);
    padding: 2rem;
  }
  
  .cart-empty i {
    font-size: 4rem;
    margin-bottom: 1.5rem;
    opacity: 0.3;
    animation: float 3s ease-in-out infinite;
  }
  
  @keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
  }
  
  .cart-empty p {
    font-size: 1.1rem;
    opacity: 0.7;
  }
  
  /* Total del Carrito Moderno */
  .cart-total {
    padding: 2rem;
    background: linear-gradient(180deg, rgba(139, 115, 85, 0.1) 0%, rgba(139, 115, 85, 0.05) 100%);
    border-top: 2px solid rgba(139, 115, 85, 0.3);
    backdrop-filter: blur(10px);
  }
  
  .cart-total-text {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 1.5rem;
    font-weight: 800;
    margin-bottom: 1.5rem;
    padding: 1rem;
    background: rgba(0, 0, 0, 0.3);
    border-radius: 10px;
    border: 1px solid rgba(139, 115, 85, 0.2);
  }
  
  .cart-total-text span:first-child {
    color: var(--light);
  }
  
  .cart-total-text span:last-child {
    color: var(--accent);
    text-shadow: 0 2px 15px rgba(201, 168, 106, 0.5);
  }
  
  /* Bot√≥n de Checkout Moderno */
  .cart-checkout {
    width: 100%;
    padding: 1.2rem;
    background: linear-gradient(135deg, #25d366 0%, #128c7e 100%);
    color: white;
    border: none;
    border-radius: 15px;
    font-size: 1.2rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.8rem;
    box-shadow: 0 5px 20px rgba(37, 211, 102, 0.3);
    position: relative;
    overflow: hidden;
  }
  
  .cart-checkout::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.3);
    transform: translate(-50%, -50%);
    transition: width 0.6s, height 0.6s;
  }
  
  .cart-checkout:hover::before {
    width: 400px;
    height: 400px;
  }
  
  .cart-checkout:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 30px rgba(37, 211, 102, 0.5);
  }
  
  .cart-checkout:active {
    transform: translateY(0);
  }
  
  .cart-checkout i {
    font-size: 1.5rem;
    animation: pulse 2s ease-in-out infinite;
  }
  
  @keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
  }
  
  /* Bot√≥n Flotante Moderno */
  .cart-toggle {
    position: fixed;
    bottom: 90px;
    right: 20px;
    width: 65px;
    height: 65px;
    background: linear-gradient(135deg, #8B7355 0%, #A0826D 100%);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: 0 5px 20px rgba(139, 115, 85, 0.5);
    z-index: 999;
    transition: all 0.3s ease;
    animation: bounce 2s ease-in-out infinite;
  }
  
  @keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
  }
  
  .cart-toggle:hover {
    transform: scale(1.15) translateY(-5px);
    box-shadow: 0 8px 30px rgba(139, 115, 85, 0.7);
    animation: none;
  }
  
  .cart-toggle i {
    color: white;
    font-size: 1.8rem;
  }
  
  .cart-badge {
    position: absolute;
    top: -8px;
    right: -8px;
    background: linear-gradient(135deg, #ff5555 0%, #ff3333 100%);
    color: white;
    min-width: 28px;
    height: 28px;
    border-radius: 14px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.85rem;
    font-weight: 800;
    border: 3px solid var(--dark);
    box-shadow: 0 3px 10px rgba(255, 85, 85, 0.5);
    animation: popIn 0.3s ease;
  }
  
  @keyframes popIn {
    0% { transform: scale(0); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
  }
  
  /* Notificaciones Modernas */
  .modern-notification {
    position: fixed;
    top: 100px;
    right: -400px;
    background: rgba(28, 25, 23, 0.95);
    backdrop-filter: blur(20px);
    color: white;
    padding: 1.2rem 1.8rem;
    border-radius: 15px;
    box-shadow: 0 10px 40px rgba(0,0,0,0.4);
    z-index: 10001;
    max-width: 350px;
    border: 1px solid rgba(139, 115, 85, 0.3);
    transition: right 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .modern-notification.show {
    right: 20px;
  }
  
  .notification-content {
    display: flex;
    align-items: center;
    gap: 1rem;
  }
  
  .notification-icon {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.3rem;
    flex-shrink: 0;
  }
  
  .notification-icon.success {
    background: rgba(37, 211, 102, 0.2);
    color: #25d366;
  }
  
  .notification-icon.error {
    background: rgba(255, 85, 85, 0.2);
    color: #ff5555;
  }
  
  .notification-icon.info {
    background: rgba(139, 115, 85, 0.2);
    color: #C9A86A;
  }
  
  .notification-text {
    flex: 1;
    font-weight: 600;
  }
  
  /* Modal de Registro Moderno */
  .register-modal {
    display: none;
    justify-content: center;
    align-items: center;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.8);
    backdrop-filter: blur(10px);
    z-index: 2000;
    animation: fadeIn 0.3s ease;
  }
  
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  
  .register-box {
    background: linear-gradient(180deg, #292524 0%, #1C1917 100%);
    color: white;
    padding: 2.5rem;
    border-radius: 20px;
    width: 90%;
    max-width: 450px;
    border: 2px solid rgba(139, 115, 85, 0.3);
    box-shadow: 0 20px 60px rgba(0,0,0,0.5);
    animation: slideUp 0.4s ease;
  }
  
  @keyframes slideUp {
    from { transform: translateY(50px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
  }
  
  .register-box h2 {
    margin-bottom: 1.5rem;
    text-align: center;
    font-size: 2rem;
    background: linear-gradient(135deg, #8B7355 0%, #C9A86A 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
  
  .register-box label {
    display: block;
    margin-top: 1.2rem;
    font-weight: 600;
    color: var(--accent);
    margin-bottom: 0.5rem;
  }
  
  .register-box input {
    width: 100%;
    padding: 1rem;
    margin-top: 0.3rem;
    border: 2px solid rgba(139, 115, 85, 0.3);
    border-radius: 10px;
    background: rgba(255, 255, 255, 0.05);
    color: white;
    font-size: 1rem;
    transition: all 0.3s ease;
  }
  
  .register-box input:focus {
    outline: none;
    border-color: var(--primary);
    background: rgba(255, 255, 255, 0.08);
    box-shadow: 0 0 20px rgba(139, 115, 85, 0.2);
  }
  
  .register-box button {
    margin-top: 2rem;
    width: 100%;
    padding: 1.2rem;
    background: linear-gradient(135deg, #25d366 0%, #128c7e 100%);
    color: white;
    border: none;
    border-radius: 12px;
    font-weight: 700;
    font-size: 1.1rem;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 5px 20px rgba(37, 211, 102, 0.3);
  }
  
  .register-box button:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 30px rgba(37, 211, 102, 0.5);
  }
  
  /* Responsive */
  @media (max-width: 768px) {
    .cart-sidebar {
      width: 100%;
      right: -100%;
    }
    
    .cart-toggle {
      bottom: 80px;
      right: 15px;
      width: 55px;
      height: 55px;
    }
    
    .cart-badge {
      min-width: 24px;
      height: 24px;
      font-size: 0.75rem;
    }
  }
`;
document.head.appendChild(modernStyles);

// Funci√≥n para parsear precios - Maneja enteros y decimales
function parsePrice(text) {
  if (!text) return 0;
  
  // Convertir a string y limpiar espacios
  text = String(text).trim();
  
  // Extraer solo n√∫meros, punto y coma
  let clean = text.replace(/[^\d.,]/g, "");
  
  if (!clean) return 0;
  
  // Contar puntos y comas
  const dotCount = (clean.match(/\./g) || []).length;
  const commaCount = (clean.match(/,/g) || []).length;
  
  // Si no tiene punto ni coma, es un n√∫mero entero (99 = 99.00)
  if (dotCount === 0 && commaCount === 0) {
    return parseFloat(clean);
  }
  
  // Caso 1: Solo tiene punto (99.00 o 99.5)
  if (dotCount > 0 && commaCount === 0) {
    return parseFloat(clean);
  }
  
  // Caso 2: Solo tiene coma (99,00 o 99,5)
  if (commaCount > 0 && dotCount === 0) {
    return parseFloat(clean.replace(',', '.'));
  }
  
  // Caso 3: Tiene ambos (1,234.56 o 1.234,56)
  if (dotCount > 0 && commaCount > 0) {
    const lastDot = clean.lastIndexOf('.');
    const lastComma = clean.lastIndexOf(',');
    
    if (lastDot > lastComma) {
      // Formato: 1,234.56
      return parseFloat(clean.replace(/,/g, ''));
    } else {
      // Formato: 1.234,56
      return parseFloat(clean.replace(/\./g, '').replace(',', '.'));
    }
  }
  
  return parseFloat(clean);
}

// Renderizar carrito moderno
function renderCart() {
  cartItemsContainer.innerHTML = "";
  
  if (cart.length === 0) {
    cartItemsContainer.innerHTML = `
      <div class="cart-empty">
        <i class="fas fa-shopping-basket"></i>
        <p>
          <span class="lang-es inline-content">Tu carrito est√° vac√≠o</span>
          <span class="lang-en inline-content">Your cart is empty</span>
        </p>
      </div>`;
    cartBadge.textContent = "0";
    cartTotalElement.textContent = "0.00";
    return;
  }

  let total = 0;
  cart.forEach((item, idx) => {
    const subtotal = item.price * item.qty;
    total += subtotal;
    
    cartItemsContainer.innerHTML += `
      <div class="cart-item">
        <div class="cart-item-info">
          <div class="cart-item-name">${item.name}</div>
          <div class="cart-item-qty">
            <i class="fas fa-utensils"></i>
            <span class="lang-es inline-content">Cantidad: ${item.qty}</span>
            <span class="lang-en inline-content">Quantity: ${item.qty}</span>
          </div>
        </div>
        <div class="cart-item-actions">
          <div class="cart-item-price">S/. ${subtotal.toFixed(2)}</div>
          <button onclick="removeFromCart(${idx})" class="cart-item-remove">
            <i class="fas fa-trash-alt"></i>
          </button>
        </div>
      </div>`;
  });

  cartBadge.textContent = cart.reduce((sum, item) => sum + item.qty, 0);
  cartTotalElement.textContent = total.toFixed(2);
}

// Agregar al carrito
function addToCart(name, price, qty) {
  const user = JSON.parse(localStorage.getItem("lp_user"));
  
  if (!user) {
    registerModal.style.display = "flex";
    return;
  }

  const existing = cart.find(item => item.name === name);
  if (existing) {
    existing.qty += qty;
  } else {
    cart.push({ name, price, qty });
  }
  
  renderCart();
  showNotification("Producto agregado al carrito", "success");
}

// Eliminar del carrito
function removeFromCart(index) {
  cart.splice(index, 1);
  renderCart();
  showNotification("Producto eliminado", "info");
}

// Toggle carrito
if (cartToggle) {
  cartToggle.addEventListener("click", () => {
    cartSidebar.classList.add("active");
  });
}

if (cartClose) {
  cartClose.addEventListener("click", () => {
    cartSidebar.classList.remove("active");
  });
}

// Cerrar carrito al hacer clic fuera
document.addEventListener("click", (e) => {
  if (cartSidebar && cartSidebar.classList.contains("active")) {
    if (!cartSidebar.contains(e.target) && !cartToggle.contains(e.target)) {
      cartSidebar.classList.remove("active");
    }
  }
});

// Sistema de registro
if (registerForm) {
  registerForm.addEventListener("submit", (e) => {
    e.preventDefault();
    
    const name = document.getElementById("regName").value.trim();
    const phone = document.getElementById("regPhone").value.trim();
    const email = document.getElementById("regEmail").value.trim();

    if (!name || !phone || !email) {
      showNotification("Por favor completa todos los campos", "error");
      return;
    }

    if (!/^[0-9]{9,}$/.test(phone)) {
      showNotification("N√∫mero de tel√©fono inv√°lido", "error");
      return;
    }

    const userData = { name, phone, email };
    localStorage.setItem("lp_user", JSON.stringify(userData));
    registerModal.style.display = "none";
    
    showNotification("Registro exitoso", "success");
  });
}

// Cerrar modal
if (registerModal) {
  registerModal.addEventListener("click", (e) => {
    if (e.target === registerModal) {
      registerModal.style.display = "none";
    }
  });
}

// Enviar por WhatsApp
if (cartCheckout) {
  cartCheckout.addEventListener("click", () => {
    const user = JSON.parse(localStorage.getItem("lp_user"));
    
    if (!user || cart.length === 0) {
      showNotification("No hay productos en el carrito", "error");
      return;
    }

    let message = `*üçΩÔ∏è NUEVO PEDIDO - La Picanter√≠a*\n\n`;
    message += `*Cliente:* ${user.name}\n`;
    message += `*Tel√©fono:* ${user.phone}\n`;
    message += `*Email:* ${user.email}\n\n`;
    message += `*üìã Detalle del pedido:*\n`;
    message += `‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n`;

    let total = 0;
    cart.forEach((item, idx) => {
      const subtotal = item.price * item.qty;
      total += subtotal;
      message += `${idx + 1}. *${item.name}*\n`;
      message += `   Cantidad: ${item.qty}\n`;
      message += `   Subtotal: S/. ${subtotal.toFixed(2)}\n\n`;
    });

    message += `‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n`;
    message += `*üí∞ TOTAL: S/. ${total.toFixed(2)}*\n\n`;
    message += `_Pedido desde picanteriasdelperu.com_`;

    const encodedMessage = encodeURIComponent(message);
    const whatsappUrl = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodedMessage}`;

    window.open(whatsappUrl, "_blank");

    cart = [];
    renderCart();
    cartSidebar.classList.remove("active");
    
    showNotification("Pedido enviado por WhatsApp", "success");
  });
}

// Configurar productos
document.querySelectorAll(".product-card").forEach(productCard => {
  const input = productCard.querySelector(".quantity-input");
  const plusBtn = productCard.querySelector(".quantity-btn:last-of-type");
  const minusBtn = productCard.querySelector(".quantity-btn:first-of-type");
  const addBtn = productCard.querySelector(".btn-primary");

  if (plusBtn) {
    plusBtn.addEventListener("click", (e) => {
      e.preventDefault(); // Previene el comportamiento por defecto
      e.stopPropagation(); // Detiene la doble ejecuci√≥n (soluciona 1, 3, 5)
      input.value = parseInt(input.value) + 1;
    });
  }

  if (minusBtn) {
    minusBtn.addEventListener("click", (e) => {
      e.preventDefault();
      if (parseInt(input.value) > 1) {
        input.value = parseInt(input.value) - 1;
      }
    });
  }

  if (addBtn) {
    // ‚ö†Ô∏è Esta es la √öNICA vez que se debe definir addBtn.
    addBtn.addEventListener("click", (e) => {
      e.preventDefault();
      const name = productCard.querySelector(".product-name").innerText;
      const priceText = productCard.querySelector(".product-price").innerText;
      const price = parsePrice(priceText);
      const qty = parseInt(input.value) || 1;
      
      addToCart(name, price, qty);
    });
  }
});

// Sistema de notificaciones moderno
function showNotification(message, type = "info") {
  const notification = document.createElement("div");
  notification.className = "modern-notification";
  
  const icons = {
    success: "fa-check-circle",
    error: "fa-exclamation-circle",
    info: "fa-info-circle"
  };
  
  notification.innerHTML = `
    <div class="notification-content">
      <div class="notification-icon ${type}">
        <i class="fas ${icons[type]}"></i>
      </div>
      <div class="notification-text">${message}</div>
    </div>
  `;

  document.body.appendChild(notification);
  
  setTimeout(() => notification.classList.add("show"), 100);

  setTimeout(() => {
    notification.classList.remove("show");
    setTimeout(() => notification.remove(), 400);
  }, 3000);
}

// Inicializar
renderCart();
window.removeFromCart = removeFromCart;
  </script>

</body>
</html>



